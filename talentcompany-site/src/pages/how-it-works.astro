---
import Layout from '../layouts/Layout.astro';
import MetaHead from '../components/MetaHead.astro';
import ContactSection from '../components/ContactSection.astro';
import Footer from '../components/Footer.astro';
import { BOOKING_URL, isExternalUrl } from '../lib/cta';

const brand = 'TalentCompany';

const meta = {
	title: 'Our Flexible Process — Tailored to Your Needs',
	description:
		'A fast, flexible process to match vetted remote talent to your workflow. Choose individuals, scaling pods, or PM-led delivery — start in days and scale month-to-month.',
};

const baseUrl = Astro.site ?? 'https://talentcompany-site.vercel.app';
const canonical = new URL('/how-it-works/', baseUrl).toString();

const faqs = [
	{
		q: 'How quickly do we receive options?',
		a: 'We can typically present vetted options in about 48 hours once we understand your needs.',
	},
	{
		q: 'Do we have to interview candidates?',
		a: 'No — interviews are optional. You can start faster or meet top matches for added confidence.',
	},
	{
		q: 'What’s the difference between Individuals, Teams, and PM-led?',
		a: 'Individuals are embedded specialists. Teams are pods for scaled throughput. PM-led includes a managed workflow with predictable turnaround and structured revisions.',
	},
];

const webPageJsonLd = {
	'@context': 'https://schema.org',
	'@type': 'WebPage',
	name: meta.title,
	description: meta.description,
	url: canonical,
	isPartOf: {
		'@type': 'WebSite',
		name: brand,
		url: baseUrl,
	},
};

const faqJsonLd = {
	'@context': 'https://schema.org',
	'@type': 'FAQPage',
	mainEntity: faqs.map((f) => ({
		'@type': 'Question',
		name: f.q,
		acceptedAnswer: { '@type': 'Answer', text: f.a },
	})),
};

const steps = [
	{
		title: 'Tell us your needs',
		body: 'Roles, tools, deliverables, timeline, overlap hours, and what “good” looks like.',
		branches: [
			{ label: 'Individuals', body: 'Define the role scope + 20h/week or 40h/week coverage.' },
			{ label: 'Teams', body: 'Define the pod roles + handoffs across projects or phases.' },
			{ label: 'PM-led', body: 'Define the intake workflow, turnaround expectations, and review cadence.' },
		],
	},
	{
		title: 'Get vetted options (typically 48 hours)',
		body: 'We deliver a shortlist aligned to your workflow and standards.',
		branches: [
			{ label: 'Individuals', body: '1–3 specialists matched to your tools and deliverables.' },
			{ label: 'Teams', body: 'A recommended pod composition (e.g., designer + coordinator + support).' },
			{ label: 'PM-led', body: 'Team + PM alignment for predictable delivery and iteration.' },
		],
	},
	{
		title: 'Interview (optional)',
		body: 'Meet the top matches — or skip interviews if you want to start faster.',
		branches: [
			{ label: 'Individuals', body: 'Quick fit check: standards, speed, and communication.' },
			{ label: 'Teams', body: 'Confirm role coverage + handoff clarity.' },
			{ label: 'PM-led', body: 'Confirm workflow fit: intake, prioritization, and revision loops.' },
		],
	},
	{
		title: 'Start month-to-month',
		body: 'Fast onboarding, clear expectations, and a cadence that fits your team.',
		branches: [
			{ label: 'Individuals', body: 'Embedded collaboration + rapid redlines and handoffs.' },
			{ label: 'Teams', body: 'Pod delivery rhythm with QA checkpoints and versioning.' },
			{ label: 'PM-led', body: 'Structured request flow with predictable turnaround.' },
		],
	},
	{
		title: 'Scale + replace as needed',
		body: 'Add capacity during peak loads, adjust roles as priorities shift, and keep delivery moving.',
		branches: [
			{ label: 'Individuals', body: 'Add a second specialist or shift coverage month-to-month.' },
			{ label: 'Teams', body: 'Expand the pod or rebalance roles across phases.' },
			{ label: 'PM-led', body: 'Increase weekly capacity by adding designers or specialists.' },
		],
	},
];

const bookingUrl = BOOKING_URL;
const bookingExternal = isExternalUrl(bookingUrl);
---

<Layout>
	<MetaHead slot="head" title={meta.title} description={meta.description} canonical={canonical} jsonLd={[webPageJsonLd, faqJsonLd]} />

	<main class="mx-auto max-w-6xl px-6 py-12 sm:py-14">
		{/* HERO */}
		<section class="relative overflow-hidden">
			<div class="grid items-center gap-10 lg:grid-cols-2">
				<div>
					<p class="text-sm font-semibold tracking-wide text-sky-300">How it works</p>
					<h1 class="mt-4 text-4xl font-semibold tracking-tight text-white sm:text-5xl">
						Our Flexible Process — Tailored to Your Needs
					</h1>
					<p class="mt-4 max-w-prose text-base leading-relaxed text-slate-300 sm:text-lg">
						A simple workflow designed to get you productive fast. Choose individuals, scale a pod, or use PM-led
						delivery — with month-to-month flexibility and clear handoffs.
					</p>

					<div class="mt-8 flex flex-wrap gap-3">
						<a
							href={bookingUrl}
							{...(bookingExternal ? { target: '_blank', rel: 'noreferrer' } : {})}
							class="inline-flex items-center justify-center rounded bg-sky-600 px-5 py-2.5 text-sm font-semibold text-white transition hover:bg-sky-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
							data-book-call
						>
							Book a 15-Min Call
						</a>
						<a
							href="/#contact"
							class="inline-flex items-center justify-center rounded-xl border border-slate-800 bg-slate-900/60 px-5 py-2.5 text-sm font-semibold text-slate-100 transition hover:bg-slate-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
							data-open-tell-us="how-it-works-hero"
						>
							Tell Us Your Needs
						</a>
					</div>
				</div>

				<div class="relative">
					<div class="rounded-2xl border border-slate-800 bg-gradient-to-br from-slate-900/60 to-slate-950 p-6 shadow-sm">
						<p class="text-xs font-semibold uppercase tracking-wide text-slate-400">Quick links</p>
						<div class="mt-4 grid gap-3 sm:grid-cols-2">
							<a
								href="/solutions/aec-talent/"
								class="rounded-xl border border-slate-800 bg-slate-900/40 p-4 transition hover:bg-slate-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
							>
								<p class="text-sm font-semibold text-slate-100">AEC</p>
								<p class="mt-1 text-xs text-slate-400">Solutions →</p>
							</a>
							<a
								href="/solutions/creatives-design/"
								class="rounded-xl border border-slate-800 bg-slate-900/40 p-4 transition hover:bg-slate-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
							>
								<p class="text-sm font-semibold text-slate-100">Creative &amp; Design</p>
								<p class="mt-1 text-xs text-slate-400">Solutions →</p>
							</a>
							<a
								href="/solutions/marketing-talent/"
								class="rounded-xl border border-slate-800 bg-slate-900/40 p-4 transition hover:bg-slate-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
							>
								<p class="text-sm font-semibold text-slate-100">Marketing</p>
								<p class="mt-1 text-xs text-slate-400">Solutions →</p>
							</a>
							<a
								href="/roles/"
								class="rounded-xl border border-slate-800 bg-slate-900/40 p-4 transition hover:bg-slate-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
							>
								<p class="text-sm font-semibold text-slate-100">Roles</p>
								<p class="mt-1 text-xs text-slate-400">Directory →</p>
							</a>
						</div>
					</div>
					<div class="pointer-events-none absolute -right-20 -top-20 h-64 w-64 rounded-full bg-sky-500/10 blur-3xl" />
					<div class="pointer-events-none absolute -bottom-24 -left-24 h-72 w-72 rounded-full bg-indigo-500/10 blur-3xl" />
				</div>
			</div>
		</section>

		{/* STEP-BY-STEP FLOW + BRANCHING */}
		<section class="mt-12" aria-labelledby="process-flow">
			<div class="flex flex-col gap-2">
				<h2 id="process-flow" class="text-2xl font-semibold tracking-tight text-white sm:text-3xl">
					The process (with flexible paths)
				</h2>
				<p class="max-w-prose text-sm leading-relaxed text-slate-300 sm:text-base">
					We follow the same core steps — with branching notes depending on whether you choose Individuals, Teams, or
					PM-led delivery.
				</p>
			</div>

			<ol class="mt-8 grid gap-4">
				{steps.map((step, idx) => (
					<li class="rounded-2xl border border-slate-800 bg-slate-900/40 p-6">
						<div class="flex flex-col gap-4 md:flex-row md:items-start md:justify-between">
							<div class="max-w-2xl">
								<div class="flex items-center gap-3">
									<div class="flex h-10 w-10 items-center justify-center rounded-xl border border-slate-800 bg-slate-950/40">
										{/* Icon placeholder */}
										<span class="text-sm font-semibold text-sky-300">{idx + 1}</span>
									</div>
									<h3 class="text-base font-semibold text-slate-100">{step.title}</h3>
								</div>
								<p class="mt-3 text-sm leading-relaxed text-slate-300">{step.body}</p>
							</div>

							<div class="w-full md:max-w-md">
								<p class="text-xs font-semibold uppercase tracking-wide text-slate-400">Branching notes</p>
								<div class="mt-3 grid gap-3">
									{step.branches.map((b) => (
										<div class="rounded-xl border border-slate-800 bg-slate-950/40 p-4">
											<p class="text-xs font-semibold uppercase tracking-wide text-sky-300">{b.label}</p>
											<p class="mt-2 text-sm text-slate-300">{b.body}</p>
										</div>
									))}
								</div>
							</div>
						</div>
					</li>
				))}
			</ol>
		</section>

		{/* WHY CHOOSE OUR APPROACH */}
		<section class="mt-12 rounded-2xl border border-slate-800 bg-slate-900/40 p-6" aria-labelledby="why-approach">
			<h2 id="why-approach" class="text-xl font-semibold text-white">Why choose our approach</h2>
			<ul class="mt-5 grid gap-2 text-sm text-slate-300 sm:grid-cols-2">
				<li class="rounded-xl border border-slate-800 bg-slate-950/40 px-4 py-3">Fast matching with vetted specialists</li>
				<li class="rounded-xl border border-slate-800 bg-slate-950/40 px-4 py-3">Timezone-aligned collaboration for faster iteration</li>
				<li class="rounded-xl border border-slate-800 bg-slate-950/40 px-4 py-3">Clear workflow, handoffs, and QA checkpoints</li>
				<li class="rounded-xl border border-slate-800 bg-slate-950/40 px-4 py-3">Month-to-month flexibility as priorities change</li>
				<li class="rounded-xl border border-slate-800 bg-slate-950/40 px-4 py-3">Optional interviews — move as fast as you want</li>
				<li class="rounded-xl border border-slate-800 bg-slate-950/40 px-4 py-3">Free replacement guarantee to reduce risk</li>
			</ul>
		</section>

		{/* PROOF */}
		<section class="mt-12" aria-labelledby="proof-how">
			<h2 id="proof-how" class="text-2xl font-semibold tracking-tight text-white sm:text-3xl">Proof</h2>
			<p class="mt-3 max-w-prose text-sm leading-relaxed text-slate-300 sm:text-base">
				{/* TODO: Replace with real testimonials carousel. */}
				Testimonials placeholder (to be filled).
			</p>
			<div class="mt-6 grid gap-4 md:grid-cols-3">
				{[1, 2, 3].map((i) => (
					<figure class="rounded-2xl border border-slate-800 bg-slate-900/40 p-6">
						<blockquote class="text-sm leading-relaxed text-slate-200">“TODO testimonial {i}.”</blockquote>
						<figcaption class="mt-3 text-xs text-slate-400">— TODO, anonymized</figcaption>
					</figure>
				))}
			</div>
		</section>

		{/* FAQ */}
		<section class="mt-12" aria-labelledby="faq-how">
			<h2 id="faq-how" class="text-2xl font-semibold tracking-tight text-white sm:text-3xl">FAQ</h2>
			<div class="mt-6 grid gap-3">
				{faqs.map((item) => (
					<details class="rounded-2xl border border-slate-800 bg-slate-900/40 p-5">
						<summary class="cursor-pointer list-none text-sm font-semibold text-slate-100">{item.q}</summary>
						<p class="mt-3 text-sm leading-relaxed text-slate-300">{item.a}</p>
					</details>
				))}
			</div>
		</section>

		{/* FINAL CTA */}
		<section class="mt-14 rounded-2xl border border-slate-800 bg-gradient-to-br from-slate-900/60 to-slate-950 p-6 sm:p-8">
			<div class="flex flex-col items-start justify-between gap-6 md:flex-row md:items-center">
				<div>
					<h2 class="text-2xl font-semibold tracking-tight text-white sm:text-3xl">Ready to get matched?</h2>
					<p class="mt-2 max-w-prose text-sm leading-relaxed text-slate-300 sm:text-base">
						Book a call to discuss your needs — or tell us your requirements and we’ll point you to the right solution.
					</p>
				</div>
				<div class="flex flex-wrap gap-3">
					<a
						href={bookingUrl}
						{...(bookingExternal ? { target: '_blank', rel: 'noreferrer' } : {})}
						class="inline-flex items-center justify-center rounded bg-sky-600 px-5 py-2.5 text-sm font-semibold text-white transition hover:bg-sky-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
						data-book-call
					>
						Book a 15-Min Call
					</a>
					<a
						href="/#contact"
						class="inline-flex items-center justify-center rounded-xl border border-slate-800 bg-slate-900/60 px-5 py-2.5 text-sm font-semibold text-slate-100 transition hover:bg-slate-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
						data-open-tell-us="how-it-works-final-cta"
					>
						Tell Us Your Needs
					</a>
				</div>
			</div>

			<div class="mt-8 grid gap-3 sm:grid-cols-2 lg:grid-cols-4">
				<a href="/solutions/aec-talent/" class="rounded-xl border border-slate-800 bg-slate-900/40 p-4 transition hover:bg-slate-900">
					<p class="text-sm font-semibold text-slate-100">AEC</p>
					<p class="mt-1 text-xs text-slate-400">Explore solution →</p>
				</a>
				<a href="/solutions/creatives-design/" class="rounded-xl border border-slate-800 bg-slate-900/40 p-4 transition hover:bg-slate-900">
					<p class="text-sm font-semibold text-slate-100">Creative &amp; Design</p>
					<p class="mt-1 text-xs text-slate-400">Explore solution →</p>
				</a>
				<a href="/solutions/marketing-talent/" class="rounded-xl border border-slate-800 bg-slate-900/40 p-4 transition hover:bg-slate-900">
					<p class="text-sm font-semibold text-slate-100">Marketing</p>
					<p class="mt-1 text-xs text-slate-400">Explore solution →</p>
				</a>
				<a href="/roles/" class="rounded-xl border border-slate-800 bg-slate-900/40 p-4 transition hover:bg-slate-900">
					<p class="text-sm font-semibold text-slate-100">Roles</p>
					<p class="mt-1 text-xs text-slate-400">Browse directory →</p>
				</a>
			</div>
		</section>
	</main>

	<div class="mx-auto max-w-6xl px-6">
		<ContactSection subject={`${brand} — new inquiry (how it works)`} />
	</div>

	<Footer />
</Layout>

