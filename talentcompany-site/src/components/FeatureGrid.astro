---
export type Feature = {
	title: string;
	description: string;
	href?: string;
	eyebrow?: string;
};

export type Props = {
	id?: string;
	ariaLabel?: string;
	heading?: string;
	subheading?: string;
	columns?: 1 | 2 | 3 | 4;
	features: Feature[];
};

const {
	id,
	ariaLabel,
	heading = 'What we do',
	subheading = 'Focused services that ship quickly and scale with you.',
	columns = 3,
	features,
} = Astro.props;

const columnClass =
	columns === 4
		? 'lg:grid-cols-4'
		: columns === 2
			? 'lg:grid-cols-2'
			: columns === 1
				? 'lg:grid-cols-1'
				: 'lg:grid-cols-3';
---

<section id={id} aria-label={ariaLabel} class="mx-auto max-w-6xl px-6 py-14 sm:py-18">
	<div class="flex flex-col gap-2">
		<h2 class="text-2xl font-semibold tracking-tight text-white sm:text-3xl">{heading}</h2>
		<p class="max-w-prose text-sm leading-relaxed text-slate-300 sm:text-base">{subheading}</p>
	</div>

	<div class:list={['mt-10 grid gap-4 sm:grid-cols-2', columnClass]}>
		{features.map((f) => {
			const Tag = f.href ? 'a' : 'div';
			return (
				<Tag
					href={f.href}
					class="group rounded-2xl border border-slate-800 bg-slate-900/40 p-6 transition hover:border-slate-700 hover:bg-slate-900/60 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
				>
					{f.eyebrow ? (
						<p class="text-xs font-semibold uppercase tracking-wide text-sky-300">{f.eyebrow}</p>
					) : null}
					<div class="flex items-start justify-between gap-4">
						<h3 class="text-base font-semibold text-slate-100">{f.title}</h3>
						{f.href ? (
							<span class="text-sm text-slate-400 transition group-hover:text-slate-200">â†’</span>
						) : null}
					</div>
					<p class="mt-3 text-sm leading-relaxed text-slate-300">{f.description}</p>
				</Tag>
			);
		})}
	</div>
</section>

